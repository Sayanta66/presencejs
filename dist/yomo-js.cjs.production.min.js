"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("rxjs"),e=require("rxjs/operators"),n=require("rxjs/webSocket");function r(t,e,n,r,o,i,c){try{var a=t[i](c),s=a.value}catch(t){return void n(t)}a.done?e(s):Promise.resolve(s).then(r,o)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var c=t.apply(e,n);function a(t){r(c,o,i,a,s,"next",t)}function s(t){r(c,o,i,a,s,"throw",t)}a(void 0)}))}}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=function(t,e){return function(t){var e=function(t){var e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function a(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(t){a=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var o=Object.create((e&&e.prototype instanceof f?e:f).prototype),i=new k(r||[]);return o._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var a=w(c,n);if(a){if(a===l)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,i),o}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var l={};function f(){}function h(){}function p(){}var v={};a(v,o,(function(){return this}));var d=Object.getPrototypeOf,y=d&&d(d(j([])));y&&y!==e&&n.call(y,o)&&(v=y);var g=p.prototype=f.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function m(t,e){var r;this._invoke=function(o,i){function c(){return new e((function(r,c){!function r(o,i,c,a){var s=u(t[o],t,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,c,a)}),(function(t){r("throw",t,c,a)})):e.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){return r("throw",t,c,a)}))}a(s.arg)}(o,i,r,c)}))}return r=r?r.then(c,c):c()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return h.prototype=p,a(g,"constructor",p),a(p,"constructor",h),h.displayName=a(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,a(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(m.prototype),a(m.prototype,i,(function(){return this})),t.AsyncIterator=m,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var c=new m(s(e,n,r,o),i);return t.isGeneratorFunction(n)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},b(g),a(g,c,"Generator"),a(g,o,(function(){return this})),a(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=j,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return c.type="throw",c.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var a=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var c=i?i.completion:{};return c.type=t,c.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:j(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}(t.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}(e={exports:{}}),e.exports}();if("undefined"!=typeof global);else if("undefined"!=typeof window)window.global=window;else{if("undefined"==typeof self)throw new Error("cannot export Go (neither global, window nor self is defined)");self.global=self}global.require||"undefined"==typeof require||(global.require=require),!global.fs&&global.require&&(global.fs=require("fs"));var a=function(){var t=new Error("not implemented");return t.code="ENOSYS",t};if(!global.fs){var s="";global.fs={constants:{O_WRONLY:-1,O_RDWR:-1,O_CREAT:-1,O_TRUNC:-1,O_APPEND:-1,O_EXCL:-1},writeSync:function(t,e){var n=(s+=f.decode(e)).lastIndexOf("\n");return-1!=n&&(console.log(s.substr(0,n)),s=s.substr(n+1)),e.length},write:function(t,e,n,r,o,i){0===n&&r===e.length&&null===o?i(null,this.writeSync(t,e)):i(a())},chmod:function(t,e,n){n(a())},chown:function(t,e,n,r){r(a())},close:function(t,e){e(a())},fchmod:function(t,e,n){n(a())},fchown:function(t,e,n,r){r(a())},fstat:function(t,e){e(a())},fsync:function(t,e){e(null)},ftruncate:function(t,e,n){n(a())},lchown:function(t,e,n,r){r(a())},link:function(t,e,n){n(a())},lstat:function(t,e){e(a())},mkdir:function(t,e,n){n(a())},open:function(t,e,n,r){r(a())},read:function(t,e,n,r,o,i){i(a())},readdir:function(t,e){e(a())},readlink:function(t,e){e(a())},rename:function(t,e,n){n(a())},rmdir:function(t,e){e(a())},stat:function(t,e){e(a())},symlink:function(t,e,n){n(a())},truncate:function(t,e,n){n(a())},unlink:function(t,e){e(a())},utimes:function(t,e,n,r){r(a())}}}if(global.process||(global.process={getuid:function(){return-1},getgid:function(){return-1},geteuid:function(){return-1},getegid:function(){return-1},getgroups:function(){throw a()},pid:-1,ppid:-1,umask:function(){throw a()},cwd:function(){throw a()},chdir:function(){throw a()}}),!global.crypto){var u=require("crypto");global.crypto={getRandomValues:function(t){u.randomFillSync(t)}}}global.performance||(global.performance={now:function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}}),global.TextEncoder||(global.TextEncoder=require("util").TextEncoder),global.TextDecoder||(global.TextDecoder=require("util").TextDecoder);var l=new TextEncoder("utf-8"),f=new TextDecoder("utf-8"),h=[];if(global.Go=function(){function t(){var t=this;this._callbackTimeouts=new Map,this._nextCallbackTimeoutID=1;var e=function(){return new DataView(t._inst.exports.memory.buffer)},n=function(t,n){e().setUint32(t+0,n,!0),e().setUint32(t+4,Math.floor(n/4294967296),!0)},r=function(n){var r=e().getFloat64(n,!0);if(0!==r){if(!isNaN(r))return r;var o=e().getUint32(n,!0);return t._values[o]}},o=function(n,r){if("number"==typeof r)return isNaN(r)?(e().setUint32(n+4,2146959360,!0),void e().setUint32(n,0,!0)):0===r?(e().setUint32(n+4,2146959360,!0),void e().setUint32(n,1,!0)):void e().setFloat64(n,r,!0);switch(r){case void 0:return void e().setFloat64(n,0,!0);case null:return e().setUint32(n+4,2146959360,!0),void e().setUint32(n,2,!0);case!0:return e().setUint32(n+4,2146959360,!0),void e().setUint32(n,3,!0);case!1:return e().setUint32(n+4,2146959360,!0),void e().setUint32(n,4,!0)}var o=t._ids.get(r);void 0===o&&(void 0===(o=t._idPool.pop())&&(o=t._values.length),t._values[o]=r,t._goRefCounts[o]=0,t._ids.set(r,o)),t._goRefCounts[o]++;var i=1;switch(typeof r){case"string":i=2;break;case"symbol":i=3;break;case"function":i=4}e().setUint32(n+4,2146959360|i,!0),e().setUint32(n,o,!0)},i=function(e,n,r){return new Uint8Array(t._inst.exports.memory.buffer,e,n)},c=function(t,e,n){for(var o=new Array(e),i=0;i<e;i++)o[i]=r(t+8*i);return o},a=function(e,n){return f.decode(new DataView(t._inst.exports.memory.buffer,e,n))},s=Date.now()-performance.now();this.importObject={wasi_snapshot_preview1:{fd_write:function(t,n,r,o){var i=0;if(1==t)for(var c=0;c<r;c++){var a=n+8*c,s=e().getUint32(a+0,!0),u=e().getUint32(a+4,!0);i+=u;for(var l=0;l<u;l++){var p=e().getUint8(s+l);if(13==p);else if(10==p){var v=f.decode(new Uint8Array(h));h=[],console.log(v)}else h.push(p)}}else console.error("invalid file descriptor:",t);return e().setUint32(o,i,!0),0},fd_close:function(){return 0},fd_fdstat_get:function(){return 0},fd_seek:function(){return 0},proc_exit:function(t){if(!global.process)throw"trying to exit with code "+t;process.exit(t)},random_get:function(t,e){return crypto.getRandomValues(i(t,e)),0}},env:{"runtime.ticks":function(){return s+performance.now()},"runtime.sleepTicks":function(e){setTimeout(t._inst.exports.go_scheduler,e)},"syscall/js.finalizeRef":function(t){console.error("syscall/js.finalizeRef not implemented")},"syscall/js.stringVal":function(t,e,n){var r=a(e,n);o(t,r)},"syscall/js.valueGet":function(t,e,n,i){var c=a(n,i),s=r(e),u=Reflect.get(s,c);o(t,u)},"syscall/js.valueSet":function(t,e,n,o){var i=r(t),c=a(e,n),s=r(o);Reflect.set(i,c,s)},"syscall/js.valueDelete":function(t,e,n){var o=r(t),i=a(e,n);Reflect.deleteProperty(o,i)},"syscall/js.valueIndex":function(t,e,n){o(t,Reflect.get(r(e),n))},"syscall/js.valueSetIndex":function(t,e,n){Reflect.set(r(t),e,r(n))},"syscall/js.valueCall":function(t,n,i,s,u,l,f){var h=r(n),p=a(i,s),v=c(u,l);try{var d=Reflect.get(h,p);o(t,Reflect.apply(d,h,v)),e().setUint8(t+8,1)}catch(n){o(t,n),e().setUint8(t+8,0)}},"syscall/js.valueInvoke":function(t,n,i,a,s){try{var u=r(n),l=c(i,a);o(t,Reflect.apply(u,void 0,l)),e().setUint8(t+8,1)}catch(n){o(t,n),e().setUint8(t+8,0)}},"syscall/js.valueNew":function(t,n,i,a,s){var u=r(n),l=c(i,a);try{o(t,Reflect.construct(u,l)),e().setUint8(t+8,1)}catch(n){o(t,n),e().setUint8(t+8,0)}},"syscall/js.valueLength":function(t){return r(t).length},"syscall/js.valuePrepareString":function(t,e){var i=String(r(e)),c=l.encode(i);o(t,c),n(t+8,c.length)},"syscall/js.valueLoadString":function(t,e,n,o){var c=r(t);i(e,n).set(c)},"syscall/js.valueInstanceOf":function(t,e){return r(t)instanceof r(e)},"syscall/js.copyBytesToGo":function(t,o,c,a,s){var u=t,l=t+4,f=i(o,c),h=r(s);if(h instanceof Uint8Array){var p=h.subarray(0,f.length);f.set(p),n(u,p.length),e().setUint8(l,1)}else e().setUint8(l,0)},"syscall/js.copyBytesToJS":function(t,o,c,a,s){var u=t,l=t+4,f=r(o),h=i(c,a);if(f instanceof Uint8Array){var p=h.subarray(0,f.length);f.set(p),n(u,p.length),e().setUint8(l,1)}else e().setUint8(l,0)}}}}var e=t.prototype;return e.run=function(){var t=o(c.mark((function t(e){var n,r=this;return c.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this._inst=e,this._values=[NaN,0,null,!0,!1,global,this],this._goRefCounts=[],this._ids=new Map,this._idPool=[],this.exited=!1;case 7:if(n=new Promise((function(t){r._resolveCallbackPromise=function(){if(r.exited)throw new Error("bad callback: Go program has already exited");setTimeout(t,0)}})),this._inst.exports._start(),!this.exited){t.next=12;break}return t.abrupt("break",16);case 12:return t.next=14,n;case 14:t.next=7;break;case 16:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e._resume=function(){if(this.exited)throw new Error("Go program has already exited");this._inst.exports.resume(),this.exited&&this._resolveExitPromise()},e._makeFuncWrapper=function(t){var e=this;return function(){var n={id:t,this:this,args:arguments};return e._pendingEvent=n,e._resume(),n.result}},t}(),global.require&&global.require.main===module&&global.process&&global.process.versions&&!global.process.versions.electron){3!=process.argv.length&&(console.error("usage: go_js_wasm_exec [wasm binary] [arguments]"),process.exit(1));var p=new Go;WebAssembly.instantiate(fs.readFileSync(process.argv[2]),p.importObject).then((function(t){return p.run(t.instance)})).catch((function(t){console.error(t),process.exit(1)}))}var v=global.Go;function d(t){return y.apply(this,arguments)}function y(){return(y=o(c.mark((function t(e){var n;return c.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return WebAssembly.instantiateStreaming||(WebAssembly.instantiateStreaming=function(){var t=o(c.mark((function t(e,n){var r;return c.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:return t.next=4,t.sent.arrayBuffer();case 4:return r=t.sent,t.next=7,WebAssembly.instantiate(r,n);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),(n=new v).importObject.env["syscall/js.finalizeRef"]=function(){},t.prev=3,t.next=6,WebAssembly.instantiateStreaming(fetch(e),n.importObject);case 6:n.run(t.sent.instance),t.next=13;break;case 10:return t.prev=10,t.t0=t.catch(3),t.abrupt("return",Promise.reject(t.t0));case 13:case"end":return t.stop()}}),t,null,[[3,10]])})))).apply(this,arguments)}exports.YoMoClient=function(r){var a,s;function u(e,n){var o,i;if("ws"!==(i=function(t){return t?t.split(":")[0]:""}(e))&&"wss"!==i)throw new Error(e+" -> The URL's scheme must be either 'ws' or 'wss'");return(o=r.call(this)||this).reconnectInterval=n.reconnectInterval||5e3,o.reconnectAttempts=n.reconnectAttempts||5,o.connectionStatus$=new t.Subject,o.connectionStatus$.subscribe({next:function(t){o.reconnectionObservable||"boolean"!=typeof t||t||o.reconnect(e,n)}}),o.wasmLoaded=!1,o.connect(e,n),o}s=r,(a=u).prototype=Object.create(s.prototype),a.prototype.constructor=a,i(a,s);var l=u.prototype;return l.connectionStatus=function(){return this.connectionStatus$.pipe(e.distinctUntilChanged())},l.on=function(t,n){this.pipe(e.filter((function(e){return e.event&&"close"!==e.event&&e.event===t&&e.data}))).subscribe({next:function(t){return n(t.data)},error:function(){},complete:function(){"close"===t&&n()}})},l.emit=function(t,e){this.socket$&&this.socket$.next({event:t,data:e})},l.close=function(){this.clearSocket()},l.connect=function(){var t=o(c.mark((function t(e,r){var o=this;return c.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.wasmLoaded){t.next=10;break}return t.prev=1,t.next=4,d("https://d1lxb757x1h2rw.cloudfront.net/y3.wasm");case 4:this.wasmLoaded=!0,t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(1),t.t0;case 10:this.socket$=new n.WebSocketSubject({url:e,serializer:function(t){return window.encode(17,t).buffer},deserializer:function(t){var e=new Uint8Array(t.data);return window.decode(17,e)},binaryType:"arraybuffer",openObserver:{next:function(){o.connectionStatus$.next(!0)}},closeObserver:{next:function(){o.clearSocket(),o.connectionStatus$.next(!1)}}}),this.socketSubscription=this.socket$.subscribe({next:function(t){o.next(t)},error:function(){o.socket$||(o.clearReconnection(),o.reconnect(e,r))}});case 15:case"end":return t.stop()}}),t,this,[[1,7]])})));return function(e,n){return t.apply(this,arguments)}}(),l.reconnect=function(n,r){var o=this;this.reconnectionObservable=t.interval(this.reconnectInterval).pipe(e.takeWhile((function(t,e){return e<o.reconnectAttempts&&!o.socket$}))),this.reconnectionSubscription=this.reconnectionObservable.subscribe({next:function(){return o.connect(n,r)},error:function(){},complete:function(){o.clearReconnection(),o.socket$||(o.complete(),o.connectionStatus$.complete())}})},l.clearSocket=function(){this.socketSubscription&&this.socketSubscription.unsubscribe(),this.socket$=void 0},l.clearReconnection=function(){this.reconnectionSubscription&&this.reconnectionSubscription.unsubscribe(),this.reconnectionObservable=void 0},u}(t.Subject);
//# sourceMappingURL=yomo-js.cjs.production.min.js.map
